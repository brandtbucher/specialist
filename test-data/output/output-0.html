<!doctype html><html><head><meta http-equiv='content-type' content='text/html;charset=utf-8'/></head><body style='background-color:white;color:black'><pre>def encode_decode(key: str, text: str) -&gt; str:
    out = []
    for <span style='background-color:#a2ffa2'>i</span><span style='background-color:#ccfecc'>, </span><span style='background-color:#a2ffa2'>t</span> in <span style='background-color:#7fff7f'>enumerate</span><span style='background-color:#a2ffa2'>(</span><span style='background-color:#aaffaa'>text</span><span style='background-color:#a2ffa2'>)</span>:
        <span style='background-color:#ccfecc'>k</span> = <span style='background-color:#feffa2'>key</span><span style='background-color:#fecccc'>[</span><span style='background-color:#ffffaa'>i</span><span style='background-color:#ffd0d0'> % </span><span style='background-color:#b6ff6d'>len</span><span style='background-color:#d7fe89'>(</span><span style='background-color:#dafe91'>key</span><span style='background-color:#d7fe89'>)</span><span style='background-color:#fecccc'>]</span>
        <span style='background-color:#32ff32'>out</span><span style='background-color:#48fe48'>.append</span><span style='background-color:#62ff62'>(</span><span style='background-color:#1fff1f'>chr</span><span style='background-color:#32ff32'>(</span><span style='background-color:#0dfe0d'>ord</span><span style='background-color:#1cff1c'>(</span><span style='background-color:#28ff28'>t</span><span style='background-color:#1cff1c'>)</span><span style='background-color:#3fff3f'> ^ </span><span style='background-color:#0dfe0d'>ord</span><span style='background-color:#1cff1c'>(</span><span style='background-color:#28ff28'>k</span><span style='background-color:#1cff1c'>)</span><span style='background-color:#32ff32'>)</span><span style='background-color:#62ff62'>)</span>
    return <span style='background-color:#7fff7f'>&quot;&quot;</span><span style='background-color:#73ff73'>.join</span><span style='background-color:#99ff99'>(</span><span style='background-color:#a2ffa2'>out</span><span style='background-color:#99ff99'>)</span>

if __name__ == &quot;__main__&quot;:
    key = &quot;Spam&quot;
    text = &quot;Hello, world!&quot;
    encoded = encode_decode(key, text)
    decoded = encode_decode(key, encoded)
    assert decoded == text
</pre></body></html>