<!doctype html><html><head><meta http-equiv='content-type' content='text/html;charset=utf-8'/></head><body style='background-color:white;color:black'><pre>def encode_decode(key: str, text: str) -&gt; str:
    out = []
    <span style='background-color:#fecccc'>for </span><span style='background-color:#d4ff7f'>i</span><span style='background-color:#feffa2'>, </span><span style='background-color:#d4ff7f'>t</span><span style='background-color:#fecccc'> in </span><span style='background-color:#d4ff7f'>enumerate</span><span style='background-color:#feffa2'>(</span><span style='background-color:#ffffaa'>text</span><span style='background-color:#feffa2'>)</span><span style='background-color:#fecccc'>:</span>
        <span style='background-color:#feffa2'>k</span><span style='background-color:#fecccc'> = </span><span style='background-color:#ffffaa'>key</span><span style='background-color:#ffd0d0'>[</span><span style='background-color:#ffffb0'>i</span><span style='background-color:#fed4d4'> % </span><span style='background-color:#dafe91'>len</span><span style='background-color:#ffffb0'>(</span><span style='background-color:#ffffb6'>key</span><span style='background-color:#ffffb0'>)</span><span style='background-color:#ffd0d0'>]</span>
        <span style='background-color:#98fe55'>out</span><span style='background-color:#b6ff6d'>.append</span><span style='background-color:#d7fe89'>(</span><span style='background-color:#98fe55'>chr</span><span style='background-color:#b6ff6d'>(</span><span style='background-color:#87fe4b'>ord</span><span style='background-color:#9fff5f'>(</span><span style='background-color:#a5ff69'>t</span><span style='background-color:#9fff5f'>)</span><span style='background-color:#bbff76'> ^ </span><span style='background-color:#87fe4b'>ord</span><span style='background-color:#9fff5f'>(</span><span style='background-color:#a5ff69'>k</span><span style='background-color:#9fff5f'>)</span><span style='background-color:#b6ff6d'>)</span><span style='background-color:#d7fe89'>)</span>
    return <span style='background-color:#a2ffa2'>&quot;&quot;</span><span style='background-color:#99ff99'>.join</span><span style='background-color:#c6ffc6'>(</span><span style='background-color:#ccfecc'>out</span><span style='background-color:#c6ffc6'>)</span>

if __name__ == &quot;__main__&quot;:
    key = &quot;Spam&quot;
    text = &quot;Hello, world!&quot;
    encoded = encode_decode(key, text)
    decoded = encode_decode(key, encoded)
    assert decoded == text
</pre></body></html>