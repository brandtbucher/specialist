<!doctype html><html><head><meta http-equiv='content-type' content='text/html;charset=utf-8'/></head><body style='background-color:black;color:white'><pre>def encode_decode(key: str, text: str) -&gt; str:
    out = []
    <span style='color:#fecccc'>for </span><span style='color:#d4ff7f'>i</span><span style='color:#feffa2'>, </span><span style='color:#d4ff7f'>t</span><span style='color:#fecccc'> in </span><span style='color:#d4ff7f'>enumerate</span><span style='color:#feffa2'>(</span><span style='color:#ffffaa'>text</span><span style='color:#feffa2'>)</span><span style='color:#fecccc'>:
        </span><span style='color:#feffa2'>k</span><span style='color:#fecccc'> = </span><span style='color:#ffffaa'>key</span><span style='color:#ffd0d0'>[</span><span style='color:#ffffb0'>i</span><span style='color:#fed4d4'> % </span><span style='color:#dafe91'>len</span><span style='color:#ffffb0'>(</span><span style='color:#ffffb6'>key</span><span style='color:#ffffb0'>)</span><span style='color:#ffd0d0'>]</span><span style='color:#fecccc'>
        </span><span style='color:#bbff76'>out</span><span style='color:#dafe91'>.append</span><span style='color:#ffffb0'>(</span><span style='color:#bbff76'>chr</span><span style='color:#dafe91'>(</span><span style='color:#a5ff69'>ord</span><span style='color:#bfff7f'>(</span><span style='color:#c3ff86'>t</span><span style='color:#bfff7f'>)</span><span style='color:#dcff99'> ^ </span><span style='color:#a5ff69'>ord</span><span style='color:#bfff7f'>(</span><span style='color:#c3ff86'>k</span><span style='color:#bfff7f'>)</span><span style='color:#dafe91'>)</span><span style='color:#ffffb0'>)</span>
    return <span style='color:#a2ffa2'>&quot;&quot;</span><span style='color:#99ff99'>.join</span><span style='color:#c6ffc6'>(</span><span style='color:#ccfecc'>out</span><span style='color:#c6ffc6'>)</span>

if __name__ == &quot;__main__&quot;:
    key = &quot;Spam&quot;
    text = &quot;Hello, world!&quot;
    encoded = encode_decode(key, text)
    decoded = encode_decode(key, encoded)
    assert decoded == text
</pre></body></html>